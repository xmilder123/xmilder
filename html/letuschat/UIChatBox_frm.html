<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title></title>
    <link rel="stylesheet" type="text/css" href="../../css/aui.css" />
    <style type="text/css">
        body {
            padding-bottom: 50px;
        }

        button {
            padding: 10px 20px;
            margin: 8px;
        }

        button::after {
            content: '-' attr( data-name) '( )';
        }
    </style>
</head>

<body>
    <section class="aui-content">开发中....</section>
    <section class="aui-chat">
        <div class="aui-chat-header">2017年7月13日</div>
        <div class="aui-chat-item aui-chat-left">
            <div class="aui-chat-media">
                <img src="../../image/avatar.jpg" />
            </div>
            <div class="aui-chat-inner">
                <div class="aui-chat-name">xmilder <span class="aui-label aui-label-warning">2.0</span></div>
                <div class="aui-chat-content">
                    <div class="aui-chat-arrow"></div>
                    Hello !
                </div>
                <div class="aui-chat-status aui-chat-status-refresh">
                    <i class="aui-iconfont aui-icon-correct aui-text-success"></i>
                </div>
            </div>
        </div>
        <div class="aui-chat-item aui-chat-right">
            <div class="aui-chat-media">
                <img src="../../image/profile_default.png" />
            </div>
            <div class="aui-chat-inner">
                <div class="aui-chat-name">流浪男</div>
                <div class="aui-chat-content">
                    <div class="aui-chat-arrow"></div>
                    你好！
                </div>
                <div class="aui-chat-status">
                    <i class="aui-iconfont aui-icon-info aui-text-danger"></i>
                </div>
            </div>
        </div>
        <div class="aui-chat-item aui-chat-left">
            <div class="aui-chat-media">
                <img src="../../image/avatar.jpg" />
            </div>
            <div class="aui-chat-inner">
                <div class="aui-chat-name">xmilder <span class="aui-label aui-label-warning">2.0</span></div>
                <div class="aui-chat-content">
                    <div class="aui-chat-arrow"></div>
                    <img src="../../image/profile_default.png" />
                </div>
            </div>
        </div>
    </section>
    <!-- <button tapmode onclick="fnOpen( this )" data-name="open"></button> -->

    <!-- <button tapmode onclick="fnClose( this )" data-name="close"></button>

    <button tapmode onclick="fnShow( this )" data-name="show"></button>

    <button tapmode onclick="fnHide( this )" data-name="hide"></button>

    <button tapmode onclick="fnPopupKeyboard( this )" data-name="popupKeyboard"></button>

    <button tapmode onclick="fnCloseKeyboard( this )" data-name="closeKeyboard"></button>

    <button tapmode onclick="fnPopupBoard( this )" data-name="popupBoard"></button>

    <button tapmode onclick="fnCloseBoard( this )" data-name="closeBoard"></button>

    <button tapmode onclick="fnValue( this )" data-name="value">设置</button>

    <button tapmode onclick="fnValue( this )" data-name="value">获取</button>

    <button tapmode onclick="fnInsertValue( this )" data-name="insertValue"></button>

    <button tapmode onclick="fnAddEventListener( this )" data-name="addEventListener">监听 recordBtn 按钮</button>

    <button tapmode onclick="fnAddEventListener( this )" data-name="addEventListener">监听 inputBar</button>

    <button tapmode onclick="fnSetPlaceholder( this )" data-name="setPlaceholder"></button>

    <button tapmode onclick="fnReloadExtraBoard( this )" data-name="reloadExtraBoard"></button> -->
</body>

</html>
<script type="text/javascript">
    var UIChatBox;

    function apiready() {
        UIChatBox = api.require('UIChatBox');
        // api.setStatusBarStyle({
        //     color: '#2390ce'
        // });
        fnOpen('el');
    };

    function fnClose(el) {
        UIChatBox.close();
    }

    function fnShow(el) {
        UIChatBox.show();
    }

    function fnHide(el) {
        UIChatBox.hide();
    }

    function fnPopupBoard(el) {
        UIChatBox.popupBoard({
            target: 'extras'
        });
    }

    function fnPopupKeyboard(el) {
        UIChatBox.popupKeyboard();
    }

    function fnCloseKeyboard(el) {
        UIChatBox.closeKeyboard();
    }

    function fnCloseBoard(el) {
        UIChatBox.closeBoard();
    }

    function fnValue(el) {
        if (el.innerHTML === '设置') {
            UIChatBox.value({
                msg: '使用 value 设置新值'
            });
        } else {
            UIChatBox.value(function(ret, err) {
                if (ret) {
                    alert(JSON.stringify(ret));
                } else {
                    alert(JSON.stringify(err));
                }
            });
        }
    }

    function fnInsertValue(el) {
        UIChatBox.insertValue({
            msg: '使用 insertValue 插入的新值'
        });
    }


    function fnAddEventListener(el) {
        if (el.innerHTML === '监听 recordBtn 按钮') {
            UIChatBox.addEventListener({
                target: 'recordBtn',
                name: 'press'
            }, function(ret, err) {
                if (ret) {
                    alert(JSON.stringify(ret));
                } else {
                    alert(JSON.stringify(err));
                }
            });
        } else {
            UIChatBox.addEventListener({
                target: 'inputBar',
                name: 'move'
            }, function(ret, err) {
                if (ret) {
                    alert(JSON.stringify(ret));
                } else {
                    alert(JSON.stringify(err));
                }
            });
        }
    }

    function fnSetPlaceholder(el) {
        UIChatBox.setPlaceholder({
            placeholder: '修改了占位提示内容'
        });
    }

    function fnReloadExtraBoard(el) {
        UIChatBox.reloadExtraBoard({
            extras: {
                btns: [{
                    title: '发送地址',
                    normalImg: 'widget://image/chatbox/loc1.png',
                    activeImg: 'widget://image/chatbox/loc2.png'
                }, {
                    title: '发送地址',
                    normalImg: 'widget://image/chatbox/loc1.png',
                    activeImg: 'widget://image/chatbox/loc2.png'
                }, {
                    title: '发送地址',
                    normalImg: 'widget://image/chatbox/loc1.png',
                    activeImg: 'widget://image/chatbox/loc2.png'
                }, {
                    title: '发送地址',
                    normalImg: 'widget://image/chatbox/loc1.png',
                    activeImg: 'widget://image/chatbox/loc2.png'
                }, {
                    title: '发送地址',
                    normalImg: 'widget://image/chatbox/loc1.png',
                    activeImg: 'widget://image/chatbox/loc2.png'
                }, {
                    title: '发送地址',
                    normalImg: 'widget://image/chatbox/loc1.png',
                    activeImg: 'widget://image/chatbox/loc2.png'
                }, {
                    title: '发送地址',
                    normalImg: 'widget://image/chatbox/loc1.png',
                    activeImg: 'widget://image/chatbox/loc2.png'
                }, {
                    title: '发送地址',
                    normalImg: 'widget://image/chatbox/loc1.png',
                    activeImg: 'widget://image/chatbox/loc2.png'
                }, {
                    title: '发送地址',
                    normalImg: 'widget://image/chatbox/loc1.png',
                    activeImg: 'widget://image/chatbox/loc2.png'
                }, ]
            }
        });
    }

    function fnOpen(el) {
        console.log(JSON.stringify(el));
        UIChatBox.open({
            placeholder: '输入发送内容',
            autoFocus: false,
            emotionPath: 'widget://image/chatbox/emotion',
            styles: {
                extrasBtn: {
                    normalImg: 'widget://image/chatbox/add1.png'
                },
                speechBtn: {
                    normalImg: 'widget://image/chatbox/cam1.png'
                },
                indicator: {
                    target: 'extrasPanel',
                    color: '#c4c4c4',
                    activeColor: '#9e9e9e'
                },
                sendBtn: {
                    titleColor: '#4cc518',
                    bg: '#999999',
                    activeBg: '#46a91e',
                    titleSize: 14
                }
            },
            extras: {
                titleSize: 10,
                titleColor: '#a3a3a3',
                btns: [{
                    title: '图片',
                    normalImg: 'widget://image/chatbox/album1.png',
                    activeImg: 'widget://image/chatbox/album2.png'
                }, {
                    title: '发送地址',
                    normalImg: 'widget://image/chatbox/loc1.png',
                    activeImg: 'widget://image/chatbox/loc2.png'
                }, {
                    title: '图片',
                    normalImg: 'widget://image/chatbox/album1.png',
                    activeImg: 'widget://image/chatbox/album2.png'
                }, {
                    title: '发送地址',
                    normalImg: 'widget://image/chatbox/loc1.png',
                    activeImg: 'widget://image/chatbox/loc2.png'
                }, {
                    title: '图片',
                    normalImg: 'widget://image/chatbox/album1.png',
                    activeImg: 'widget://image/chatbox/album2.png'
                }, {
                    title: '发送地址',
                    normalImg: 'widget://image/chatbox/loc1.png',
                    activeImg: 'widget://image/chatbox/loc2.png'
                }, {
                    title: '图片',
                    normalImg: 'widget://image/chatbox/album1.png',
                    activeImg: 'widget://image/chatbox/album2.png'
                }, {
                    title: '发送地址',
                    normalImg: 'widget://image/chatbox/loc1.png',
                    activeImg: 'widget://image/chatbox/loc2.png'
                }, {
                    title: '图片',
                    normalImg: 'widget://image/chatbox/album1.png',
                    activeImg: 'widget://image/chatbox/album2.png'
                }, {
                    title: '发送地址',
                    normalImg: 'widget://image/chatbox/loc1.png',
                    activeImg: 'widget://image/chatbox/loc2.png'
                }, {
                    title: '图片',
                    normalImg: 'widget://image/chatbox/album1.png',
                    activeImg: 'widget://image/chatbox/album2.png'
                }, {
                    title: '发送地址',
                    normalImg: 'widget://image/chatbox/loc1.png',
                    activeImg: 'widget://image/chatbox/loc2.png'
                }]
            }
        }, function(ret, err) {
            if (ret) {
                console.log(JSON.stringify(ret));
            } else {
                console.log(JSON.stringify(err));
            }
        });
    }
</script>
